const a0_0x474bdb=a0_0x339b;(function(_0x19102d,_0x1a0e22){const _0x188029=a0_0x339b,_0x19da31=_0x19102d();while(!![]){try{const _0x36de92=-parseInt(_0x188029(0xc7))/0x1+-parseInt(_0x188029(0xfc))/0x2*(parseInt(_0x188029(0xd8))/0x3)+parseInt(_0x188029(0xbe))/0x4+parseInt(_0x188029(0xd3))/0x5+-parseInt(_0x188029(0xd1))/0x6+-parseInt(_0x188029(0xe2))/0x7*(-parseInt(_0x188029(0xe4))/0x8)+parseInt(_0x188029(0xec))/0x9;if(_0x36de92===_0x1a0e22)break;else _0x19da31['push'](_0x19da31['shift']());}catch(_0x5c8ca4){_0x19da31['push'](_0x19da31['shift']());}}}(a0_0x351a,0xc3bf9));const https=require(a0_0x474bdb(0xbd)),fs=require('fs'),express=require(a0_0x474bdb(0xc5)),app=express(),bodyParser=require(a0_0x474bdb(0xf3)),webrtc=require(a0_0x474bdb(0xd9)),wifi=require('node-wifi');function a0_0x339b(_0x998f9,_0x5ae201){const _0x351a59=a0_0x351a();return a0_0x339b=function(_0x339b3f,_0x6489a1){_0x339b3f=_0x339b3f-0xad;let _0x351494=_0x351a59[_0x339b3f];return _0x351494;},a0_0x339b(_0x998f9,_0x5ae201);}let senderStream=null;const listeners=new Set(),options={'key':fs[a0_0x474bdb(0xb7)](a0_0x474bdb(0xcd)),'cert':fs[a0_0x474bdb(0xb7)](a0_0x474bdb(0xb1))};app[a0_0x474bdb(0xce)](a0_0x474bdb(0xb9),a0_0x474bdb(0xb6)),app[a0_0x474bdb(0xce)](a0_0x474bdb(0xfa),__dirname+a0_0x474bdb(0xd7)),app['use'](express['static'](__dirname+a0_0x474bdb(0xae))),require('dotenv')[a0_0x474bdb(0xb2)](),app['use'](bodyParser['json']()),app[a0_0x474bdb(0xc9)](bodyParser['urlencoded']({'extended':!![]})),app[a0_0x474bdb(0xe8)]('/',(_0x49e860,_0x3e0085)=>{const _0x3d5c9b=a0_0x474bdb;_0x3e0085[_0x3d5c9b(0xbc)](_0x3d5c9b(0xf2));}),app[a0_0x474bdb(0xe8)](a0_0x474bdb(0xe9),(_0x3c9233,_0x4c679e)=>{_0x4c679e['render']('rehber');}),app[a0_0x474bdb(0xe8)](a0_0x474bdb(0xf7),(_0x62dbe9,_0x483061)=>{const _0x101b42=a0_0x474bdb;_0x483061[_0x101b42(0xbc)](_0x101b42(0xf5));}),app['post'](a0_0x474bdb(0xe7),async({body:_0x11000f},_0x5e26f8)=>{const _0x3380f5=a0_0x474bdb;try{const _0x3fa779=new webrtc[(_0x3380f5(0xc1))]({'iceServers':[{'urls':_0x3380f5(0xf8)}],'encodings':[{'payloadType':0x6f,'maxBitrate':0xfa00,'codecOptions':{'opusStereo':_0x3380f5(0xb4),'opusFec':_0x3380f5(0xb4),'opusDtx':_0x3380f5(0xf1),'sampleRate':0x7d00}}]}),_0x2a852d={'audio':{'mandatory':{'echoCancellation':!![],'noiseSuppression':!![],'googAutoGainControl':!![]},'optional':[{'codec':_0x3380f5(0xcc)}]},'video':![]};_0x3fa779[_0x3380f5(0xdb)]=_0x18a9b0=>handleTrackEvent(_0x18a9b0,_0x3fa779);const _0x591ff4=new webrtc[(_0x3380f5(0xf6))](_0x11000f[_0x3380f5(0xef)]);await _0x3fa779[_0x3380f5(0xee)](_0x591ff4);const _0x4dc43a=await _0x3fa779[_0x3380f5(0xe6)]();await _0x3fa779[_0x3380f5(0xb5)](_0x4dc43a);const _0x473cbe={'sdp':_0x3fa779['localDescription']};_0x5e26f8[_0x3380f5(0xc3)](_0x473cbe),listeners[_0x3380f5(0xed)](_0x12b1ec=>{const _0x317df9=_0x3380f5;_0x12b1ec[_0x317df9(0xf0)][_0x317df9(0xe3)](_0x317df9(0xaf));});}catch(_0x1111d7){console[_0x3380f5(0xb3)](_0x3380f5(0xfe),_0x1111d7),_0x5e26f8['status'](0x1f4)[_0x3380f5(0xc3)]({'error':'Failed\x20to\x20create\x20broadcast\x20connection.'});}}),app[a0_0x474bdb(0xe5)]('/consumer',async({body:_0x15bd0c},_0x46bcd7)=>{const _0x46dbe3=a0_0x474bdb;try{const _0x5cc064=new webrtc[(_0x46dbe3(0xc1))]({'iceServers':[{'urls':'stun:127.0.0.1:3478'}]}),_0x1e3fb2=new webrtc['RTCSessionDescription'](_0x15bd0c[_0x46dbe3(0xef)]);await _0x5cc064[_0x46dbe3(0xee)](_0x1e3fb2);senderStream&&senderStream[_0x46dbe3(0xea)]()[_0x46dbe3(0xed)](_0x2f9e2c=>_0x5cc064[_0x46dbe3(0xc0)](_0x2f9e2c,senderStream));const _0x191f77=await _0x5cc064[_0x46dbe3(0xe6)]();await _0x5cc064['setLocalDescription'](_0x191f77);const _0x40d060={'sdp':_0x5cc064[_0x46dbe3(0xcf)]};_0x46bcd7[_0x46dbe3(0xc3)](_0x40d060);}catch(_0x3c9f1b){console[_0x46dbe3(0xb3)](_0x46dbe3(0xb8),_0x3c9f1b),_0x46bcd7[_0x46dbe3(0xbb)](0x1f4)[_0x46dbe3(0xc3)]({'error':_0x46dbe3(0xf9)});}}),app[a0_0x474bdb(0xe5)]('/broadcast-offer',async({body:_0x4ffcea},_0x221a9b)=>{const _0x35090b=a0_0x474bdb;try{const _0x4b61be=new webrtc['RTCPeerConnection']({'iceServers':[{'urls':_0x35090b(0xf8)}]});_0x4b61be['ontrack']=_0x4f1e0a=>handleTrackEvent(_0x4f1e0a,_0x4b61be);const _0x269d54=new webrtc[(_0x35090b(0xf6))](_0x4ffcea[_0x35090b(0xef)]);await _0x4b61be[_0x35090b(0xee)](_0x269d54);const _0xacb82d=await _0x4b61be[_0x35090b(0xe6)]();await _0x4b61be[_0x35090b(0xb5)](_0xacb82d);const _0x1e7001={'sdp':_0x4b61be['localDescription']};_0x221a9b['json'](_0x1e7001);}catch(_0x50c5e9){console[_0x35090b(0xb3)]('Error\x20in\x20/broadcast-offer:',_0x50c5e9),_0x221a9b[_0x35090b(0xbb)](0x1f4)[_0x35090b(0xc3)]({'error':_0x35090b(0xb0)});}}),app['post'](a0_0x474bdb(0xd5),(_0x5a2649,_0x5b5aba)=>{const _0x3f1610=a0_0x474bdb,{status:_0x48235c}=_0x5a2649[_0x3f1610(0xdc)];listeners[_0x3f1610(0xed)](_0xcf9c1b=>{const _0x3e3cdf=_0x3f1610;_0xcf9c1b['res'][_0x3e3cdf(0xe3)]('data:\x20'+_0x48235c+'\x0a\x0a');}),_0x5b5aba[_0x3f1610(0xbb)](0xc8)[_0x3f1610(0xd0)]('Status\x20broadcasted');}),app[a0_0x474bdb(0xe8)](a0_0x474bdb(0xc4),(_0x5b8e5f,_0x24daf1)=>{const _0x1b7ce0=a0_0x474bdb;senderStream?_0x24daf1[_0x1b7ce0(0xc3)]({'publisherExists':!![]}):_0x24daf1[_0x1b7ce0(0xc3)]({'publisherExists':![]});}),app[a0_0x474bdb(0xe5)](a0_0x474bdb(0xc2),(_0x3779c6,_0x5205a4)=>{const _0x4a9ad9=a0_0x474bdb;senderStream=null,listeners[_0x4a9ad9(0xed)](_0x2cdfa7=>{const _0x2fce92=_0x4a9ad9;_0x2cdfa7[_0x2fce92(0xf0)][_0x2fce92(0xe3)](_0x2fce92(0xbf));}),listeners[_0x4a9ad9(0xba)](),_0x5205a4[_0x4a9ad9(0xbb)](0xc8)['send']('Broadcast\x20stopped');}),app[a0_0x474bdb(0xe8)](a0_0x474bdb(0xcb),(_0x163414,_0x53f3a6)=>{const _0x1f177e=a0_0x474bdb;wifi[_0x1f177e(0xde)]()[_0x1f177e(0xda)](_0x2ca611=>{const _0x280373=_0x1f177e;_0x2ca611[_0x280373(0xeb)]>0x0?_0x53f3a6[_0x280373(0xc3)]({'signalStrength':_0x2ca611[0x0][_0x280373(0xd2)]}):_0x53f3a6[_0x280373(0xbb)](0x194)['json']({'error':_0x280373(0xca)});})[_0x1f177e(0xc8)](_0x17a57f=>{const _0x94e976=_0x1f177e;console[_0x94e976(0xb3)]('Wi-Fi\x20taraması\x20başarısız:',_0x17a57f),_0x53f3a6['status'](0x1f4)[_0x94e976(0xc3)]({'error':_0x94e976(0xe0)});});}),app['post'](a0_0x474bdb(0xad),(_0x346f6c,_0x209d3b)=>{const _0x61f208=a0_0x474bdb,{username:_0x463ab5,password:_0x238f56}=_0x346f6c[_0x61f208(0xdc)];return _0x463ab5===process[_0x61f208(0xfd)][_0x61f208(0xdf)]&&_0x238f56===process[_0x61f208(0xfd)][_0x61f208(0xd6)]?_0x209d3b[_0x61f208(0xbb)](0xc8)['json']({'message':_0x61f208(0xfb)}):_0x209d3b[_0x61f208(0xbb)](0x191)[_0x61f208(0xc3)]({'message':_0x61f208(0xe1)});});function a0_0x351a(){const _0x377569=['ejs','readFileSync','Error\x20in\x20/consumer:','view\x20engine','clear','status','render','https','2689148OLlDbE','data:\x20stop\x0a\x0a','addTrack','RTCPeerConnection','/stop-broadcast','json','/check-publisher','express','streams','306955QGRGbU','catch','use','Wi-Fi\x20ağı\x20bulunamadı.','/wifi-signal','opus','private-key.pem','set','localDescription','send','5822448RXIBWe','signal_level','4536055IkrSgm','createServer','/broadcast-status','PASSWORD','/views','1805487lvuypo','wrtc','then','ontrack','body','Error\x20in\x20handleTrackEvent:','scan','ADMIN_USERNAME','Wi-Fi\x20taraması\x20sırasında\x20bir\x20hata\x20oluştu.','Invalid\x20username\x20or\x20password','21KLzYwc','write','2507488okufcV','post','createAnswer','/broadcast','get','/rehber','getTracks','length','1450539ugREfj','forEach','setRemoteDescription','sdp','res','true','index','body-parser','listen','index2','RTCSessionDescription','/test','stun:192.168.4.1:3478','Failed\x20to\x20create\x20consumer\x20connection.','views','Login\x20successful','2PUhIBT','env','Error\x20in\x20/broadcast:','/login','/public','data:\x20start\x0a\x0a','Failed\x20to\x20process\x20broadcast\x20offer.','certificate.pem','config','error','false','setLocalDescription'];a0_0x351a=function(){return _0x377569;};return a0_0x351a();}function handleTrackEvent(_0x484127,_0x1c6e3e){const _0x520328=a0_0x474bdb;try{senderStream=_0x484127[_0x520328(0xc6)][0x0];}catch(_0x3ca847){console[_0x520328(0xb3)](_0x520328(0xdd),_0x3ca847);}}https[a0_0x474bdb(0xd4)](options,app)[a0_0x474bdb(0xf4)](0xbbc,()=>{console['log']('HTTPS\x20sunucusu\x20çalışıyor:\x20https://127.0.0.1:3000');});